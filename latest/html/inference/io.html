

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Inference IO &mdash; PyCBC 3c48bf documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/typed.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/terminal.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PyCBC template bank generation documentation (pycbc.tmpltbank)" href="../tmpltbank.html" />
    <link rel="prev" title="Sampler API" href="sampler_api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.15.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../credit.html">Use of PyCBC in Scientific Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Running PyCBC under Docker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pycbc_make_psd_estimation_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pycbc_make_coinc_search_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pygrb.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../inference.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#sampling-the-parameter-space-pycbc-inference">Sampling the parameter space (<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#visualizing-the-posteriors">Visualizing the Posteriors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#workflows">Workflows</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../inference.html#for-developers">For Developers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sampler_api.html">Sampler API</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Inference IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview-guidelines">Overview &amp; Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#posterior-files">Posterior Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inheritance-diagrams">Inheritance diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-add-a-sampler-io-class">How to add a sampler IO class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalog.html">Catalog of Observed Gravitational-wave Mergers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataquality.html">Query times of valid data, hardware injections, and more.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gw150914.html">Signal Processing with GW150914</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detector.html">Gravitational-wave Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../psd.html">Handling PSDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../noise.html">Generating Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filter.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distributions.html">Using PyCBC Distributions from PyCBC Inference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../building_bundled_executables.html">Building Bundled Executables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal notranslate"><span class="pre">pycbc.workflow</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyCBC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a> &raquo;</li>
        
      <li>Inference IO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/inference/io.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="inference-io">
<h1>Inference IO<a class="headerlink" href="#inference-io" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.io</span></code></a> module provides classes and utilities for
reading and writing inference results to files. Each sampler must have a unique
class for reading/writing that sampler’s results from/to a file.  These are the
<em>sampler IO classes</em>. Below, we provide an overview of the general structure of
these IO classes.</p>
<div class="section" id="overview-guidelines">
<h2>Overview &amp; Guidelines<a class="headerlink" href="#overview-guidelines" title="Permalink to this headline">¶</a></h2>
<p>The guidelines for creating sampler IO classes are similar to the <a class="reference internal" href="sampler_api.html#sampler-api-overview"><span class="std std-ref">sampler
classes</span></a>, though only having a single level of
inheritance is not required (since the base file class, <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>,
itself inherits from <a class="reference external" href="http://docs.h5py.org/en/stable/high/file.html#File" title="(in h5py v2.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code></a>). The following apply to
all sampler IO classes:</p>
<ol class="arabic simple">
<li>All sampler IO classes must inherit from <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. This is an
<a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abstract</span> <span class="pre">base</span> <span class="pre">class</span></code></a> that inherits from
<a class="reference external" href="http://docs.h5py.org/en/stable/high/file.html#File" title="(in h5py v2.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code></a>; consequently, all samplers will write to
hdf files.</li>
<li>All sampler IO classes must have a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute that is unique across
all IO classes in <a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.io</span></code></a>. This name is saved to the
file and used to determine which class to read the file with when it is
loaded (see <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.loadfile" title="pycbc.inference.io.loadfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.loadfile</span></code></a> for
details). For example, the name attribute for <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.emcee.EmceeFile" title="pycbc.inference.io.emcee.EmceeFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeFile</span></code></a> – the IO class
for <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> – is <code class="docutils literal notranslate"><span class="pre">emcee_file</span></code>.</li>
<li>Duplicate code should be avoided. If multiple samplers have common IO
methods, those methods should be added to one or more support classes that
the IO class can inherit from, in addition to <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. For
example, all single-temperature MCMC samplers save their samples as
<code class="docutils literal notranslate"><span class="pre">nchains</span> <span class="pre">x</span> <span class="pre">niteraitons</span></code> datasets. Consequently, functionality to read and
write samples for single-temperature MCMC samplers is provided by the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCIO</span></code> class, by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">MCMCIO.read_raw_samples</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">MCMCIO.write_samples</span></code>
methods, respectively.</li>
<li>The ratio of sampler IO classes to sampler classes should be 1:1. That is,
each sampler should have a unique IO class and each IO class should only be
used by one sampler.</li>
<li>The files that the sampler IO classes provide IO to are used for
checkpointing by <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>, and are the final data product that
the program creates. This means that a sampler IO class must store enough
information to the file such that the sampler can be initialized and
continue running (either to resume for checkpoint, or to use the output of
a run as the initial conditions for another run, to accumulate more
points) as if the sampler had run continuously.</li>
<li>All samples, including any statistics returned by the
<a class="reference internal" href="../pycbc.inference.models.html#module-pycbc.inference.models" title="pycbc.inference.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">model</span></code></a> (log likelihood, log prior, etc.)
should be stored as datasets (one for each parameter or statistic) to the
file’s <code class="docutils literal notranslate"><span class="pre">samples</span></code> group. The shape of the datasets may be sampler (and run)
specific.</li>
<li>All sampler-specific data and metadata should be stored to the file’s
<code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group. What is in the <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group and its
organization may be sampler specific. This is where any additional
information needed to start the sampler from a checkpoint (such as the
random state) should be stored.</li>
<li>Models may write additional information to the files. For example,
data-dependent models may save the data that was analyzed to the <code class="docutils literal notranslate"><span class="pre">data</span></code>
group.  See the <a class="reference internal" href="../pycbc.inference.models.html#module-pycbc.inference.models" title="pycbc.inference.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.models</span></code></a> module for more details.</li>
</ol>
<p>As mentioned above, the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a> class is the abstract base class
that defines the methods and properties that all sampler IO classes must have.
The abstract methods that IO classes must override are:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile.read_raw_samples" title="pycbc.inference.io.base_hdf.BaseInferenceFile.read_raw_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_raw_samples</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile.write_samples" title="pycbc.inference.io.base_hdf.BaseInferenceFile.write_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_samples</span></code></a></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_posterior</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_resume_point</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_sampler_metadata</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="posterior-files">
<h2>Posterior Files<a class="headerlink" href="#posterior-files" title="Permalink to this headline">¶</a></h2>
<p>In addition to the sampler IO classes, there are two special classes who’s
purpose is to just store a posterior. These are the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> and
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> classes.</p>
<p><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> read/writes hdf files. Like the sampler IO classes, it inherits
from <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. The key difference is that all of the datasets in
the <code class="docutils literal notranslate"><span class="pre">samples</span></code> group are simple, flattened 1D arrays representing the
posterior. All sampler IO classes must be able to write their samples to a
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> via their <code class="docutils literal notranslate"><span class="pre">write_posterior</span></code> method (which is required by
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>). A <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> may or may not have other metadata in
it – <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code>, model data, etc. – depending on the file that it was
created from. The only guaranteed property is that the <code class="docutils literal notranslate"><span class="pre">samples</span></code> are 1D
arrays.</p>
<p>Since a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> may only contain 1D arrays of the samples, it most
likely cannot be used to resume a <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code> run, as a sampler IO file
can. For example, a multi-tempered MCMC sampler would only write samples from
its coldest temperature chain to a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a>, discarding samples from the
hotter chains. A <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> is therefore not created by
<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>.  Instead, <code class="docutils literal notranslate"><span class="pre">pycbc_inference_extract_samples</span></code> may be run
on a sampler file to produce a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a>. The primary purpose of a
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> is to provide a compact, easy to read file that is universal
for all samplers.</p>
<p>The <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> class takes this universality one step further: it is a
simple text file containing 1D arrays of the posterior samples for each
parameter. The primary purpose of <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> is to provide an API for
text files that is similar to the sampler IO and <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> classes, so
that <code class="docutils literal notranslate"><span class="pre">pycbc_inference_plot_posterior</span></code> may be used on results from any
software suite (e.g., this is used to compare results from <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>
to posteriors published by the LIGO Scientific Collaboration).</p>
</div>
<div class="section" id="inheritance-diagrams">
<h2>Inheritance diagrams<a class="headerlink" href="#inheritance-diagrams" title="Permalink to this headline">¶</a></h2>
<p>The following are inheritance diagrams for all of the currently supported IO
classes:</p>
<ul class="simple" id="inheritance-io-cpnest-file">
<li><code class="docutils literal notranslate"><span class="pre">cpnest_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-729e0fea0d9cd159959e312201fc51818450b522.png" alt="Inheritance diagram of pycbc.inference.io.cpnest.CPNestFile" usemap="#inheritance62422d073e" class="inheritance graphviz" /></div>
<map id="inheritance62422d073e" name="inheritance62422d073e">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,277,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,290,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,339,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-dynesty-file">
<li><code class="docutils literal notranslate"><span class="pre">dynesty_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-01e628d4500fdbf7c26b460a2ac26a56b3aad4d3.png" alt="Inheritance diagram of pycbc.inference.io.dynesty.DynestyFile" usemap="#inheritance8ab1bd4ddd" class="inheritance graphviz" /></div>
<map id="inheritance8ab1bd4ddd" name="inheritance8ab1bd4ddd">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,277,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,290,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,339,177"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.dynesty.DynestyFile" target="_top" title="Class to handle file IO for the ``dynesty`` sampler." alt="" coords="91,225,253,251"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-emcee-file">
<li><code class="docutils literal notranslate"><span class="pre">emcee_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-85bd4172108a6c19c47274dc930f846a19a22074.png" alt="Inheritance diagram of pycbc.inference.io.emcee.EmceeFile" usemap="#inheritance3b4a8626f3" class="inheritance graphviz" /></div>
<map id="inheritance3b4a8626f3" name="inheritance3b4a8626f3">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="19,5,226,30"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="5,78,239,103"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.MCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="263,78,495,103"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.emcee.EmceeFile" target="_top" title="Class to handle file IO for the ``emcee`` sampler." alt="" coords="305,151,453,176"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.SingleTempMCMCIO" target="_top" title="Provides functions for reading/writing samples from an MCMC sampler." alt="" coords="519,78,763,103"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-emcee-pt-file">
<li><code class="docutils literal notranslate"><span class="pre">emcee_pt_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-40618e1f7a9040fbf3784e8fb905df83b1f56fe4.png" alt="Inheritance diagram of pycbc.inference.io.emcee_pt.EmceePTFile" usemap="#inheritance6a38ac3ab2" class="inheritance graphviz" /></div>
<map id="inheritance6a38ac3ab2" name="inheritance6a38ac3ab2">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="16,4,190,26"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="4,66,201,87"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.MCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="531,4,726,26"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.MultiTemperedMetadataIO" target="_top" title="Adds support for reading/writing multi&#45;tempered metadata to" alt="" coords="493,66,764,87"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.MultiTemperedMCMCIO" target="_top" title="Provides functions for reading/writing samples from a parallel&#45;tempered" alt="" coords="221,66,473,87"/>
<area shape="rect" id="node6" href="../pycbc.inference.io.html#pycbc.inference.io.emcee_pt.EmceePTFile" target="_top" title="Class to handle file IO for the ``emcee`` sampler." alt="" coords="271,127,424,148"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-epsie-file">
<li><code class="docutils literal notranslate"><span class="pre">epsie_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-ea2c2fe8b8ecc906531847dd43d8a37303e9dcda.png" alt="Inheritance diagram of pycbc.inference.io.epsie.EpsieFile" usemap="#inheritancefdd5703eb5" class="inheritance graphviz" /></div>
<map id="inheritancefdd5703eb5" name="inheritancefdd5703eb5">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="16,4,190,26"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="4,66,201,87"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.MCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="531,4,726,26"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.MultiTemperedMetadataIO" target="_top" title="Adds support for reading/writing multi&#45;tempered metadata to" alt="" coords="493,66,764,87"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.MultiTemperedMCMCIO" target="_top" title="Provides functions for reading/writing samples from a parallel&#45;tempered" alt="" coords="221,66,473,87"/>
<area shape="rect" id="node6" href="../pycbc.inference.io.html#pycbc.inference.io.epsie.EpsieFile" target="_top" title="Class to handle IO for Epsie&#39;s parallel&#45;tempered sampler." alt="" coords="293,127,401,148"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-multinest-file">
<li><code class="docutils literal notranslate"><span class="pre">multinest_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-e557c7ec892f2d217aff9a331ed5d2a30f843d0f.png" alt="Inheritance diagram of pycbc.inference.io.multinest.MultinestFile" usemap="#inheritancefd3d78355c" class="inheritance graphviz" /></div>
<map id="inheritancefd3d78355c" name="inheritancefd3d78355c">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="19,5,228,31"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="5,79,241,104"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.multinest.MultinestFile" target="_top" title="Class to handle file IO for the ``multinest`` sampler." alt="" coords="34,152,213,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-posterior-file">
<li><code class="docutils literal notranslate"><span class="pre">posterior_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-992d80d03fbdb36bfaa3a61246f8994f01fa8128.png" alt="Inheritance diagram of pycbc.inference.io.posterior.PosteriorFile" usemap="#inheritance91719698da" class="inheritance graphviz" /></div>
<map id="inheritance91719698da" name="inheritance91719698da">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="5,5,215,31"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" target="_top" title="Class to handle file IO for the simplified Posterior file." alt="" coords="23,79,197,104"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-ultranest-file">
<li><code class="docutils literal notranslate"><span class="pre">ultranest_file</span></code>:</li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-88a1b103036deec161c4c737102025f34d39d473.png" alt="Inheritance diagram of pycbc.inference.io.ultranest.UltranestFile" usemap="#inheritance4db37bd585" class="inheritance graphviz" /></div>
<map id="inheritance4db37bd585" name="inheritance4db37bd585">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,277,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,290,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,339,177"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.ultranest.UltranestFile" target="_top" title="Class to handle file IO for the ``ultranest`` sampler." alt="" coords="83,225,261,251"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-add-a-sampler-io-class">
<span id="how-to-add-a-sampler-io"></span><h2>How to add a sampler IO class<a class="headerlink" href="#how-to-add-a-sampler-io-class" title="Permalink to this headline">¶</a></h2>
<p>If you are <a class="reference internal" href="sampler_api.html#how-to-add-a-sampler"><span class="std std-ref">adding support for a new sampler</span></a> you
will also need to add a new sampler IO class. The following are steps to do
that:</p>
<ol class="arabic simple">
<li>Create a file in <code class="docutils literal notranslate"><span class="pre">pycbc/inference/io</span></code> for the new sampler IO class.</li>
<li>Add the new class definition. The class must inherit from at least
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>.</li>
<li>Give a name attribute to the class that is unique across the sampler IO
classes.</li>
<li>Add any other methods you need to satisfy the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>’s required
methods, plus other functionality needed to read/write relevant metadata
about the sampler. You are free to write as much metadata in any format you
like to the <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group. When adding methods, try to follow the
guidelines above: do not duplicate code, and try to use support classes that
offer functionality that you need. If you think some of the methods will be
useful for more than just your sampler, create a new support class and add
those methods to it.  However, if you’re unsure what is available or how
best to arrange things, just add the methods you need to your new class
definition. Fixing code duplication or updating support classes to can be
done through the review process when you wish to add your new sampler to the
main gwastro repository.</li>
<li>Add the sampler IO class to the <code class="docutils literal notranslate"><span class="pre">filetypes</span></code> dictionary in
<code class="docutils literal notranslate"><span class="pre">pycbc/inference/io/__init__.py</span></code> so that
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.loadfile" title="pycbc.inference.io.loadfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.loadfile</span></code></a> is aware of it to use.</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tmpltbank.html" class="btn btn-neutral float-right" title="PyCBC template bank generation documentation (pycbc.tmpltbank)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sampler_api.html" class="btn btn-neutral float-left" title="Sampler API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016, 2017, Alexander Nitz, Ian Harry, Christopher M. Biwer, Duncan A.  Brown, Josh Willis, and Tito Dal Canton
      <span class="lastupdated">
        Last updated on Mar 13, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>